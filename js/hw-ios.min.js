!function(a){var b=[],c=function(){},d={defaultPath:"/",before:c,on:c,notfound:c},e={current:null,previous:null,config:function(a){for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);return e},add:function(a,c,d){return a&&c&&("function"==typeof c&&(d=c,c=null),b.push({path:a,name:c,fn:d||function(){}})),e},go:function(a){return location.hash=a,e},back:function(a){return e.previous?(history.back(),e.previous=null):a&&(location.hash=a),e}},f=function(){var a=location.hash.slice(1),c=!1,f=e.current;a||(a=d.defaultPath),
f&&f!=e.previous&&(e.previous=f),e.current=a;for(var g=0,h=b.length;h>g&&!c;g++){var i=b[g],j=i.path,k=i.name,l=i.fn;if("string"==typeof j)j.toLowerCase()==a.toLowerCase()&&(d.before.call(e,j,k),l.call(e),d.on.call(e,j,k),c=!0);else{var m=a.match(j);m&&(d.before.call(e,j,k,m),l.apply(e,m),d.on.call(e,j,k,m),c=!0)}}return c||d.notfound.call(e),e};e.init=function(b){return a.addEventListener("hashchange",f),f()},e.reload=f,a.ruto=e}(window),function(a,b){function c(a,c){d.addType(a,function(f,g,h){
var i,j,k,l,m=g,n=(new Date).getTime();if(!f){m={},l=[],k=0;try{for(f=c.length;f=c.key(k++);)e.test(f)&&(j=JSON.parse(c.getItem(f)),j.expires&&j.expires<=n?l.push(f):m[f.replace(e,"")]=j.data);for(;f=l.pop();)c.removeItem(f)}catch(a){}return m}if(f="__amplify__"+f,g===b){if(i=c.getItem(f),j=i?JSON.parse(i):{expires:-1},!(j.expires&&j.expires<=n))return j.data;c.removeItem(f)}else if(null===g)c.removeItem(f);else{j=JSON.stringify({data:g,expires:h.expires?n+h.expires:null});try{c.setItem(f,j)}catch(b){
d[a]();try{c.setItem(f,j)}catch(a){throw d.error()}}}return m})}var d=a.store=function(a,b,c){var e=d.type;return c&&c.type&&c.type in d.types&&(e=c.type),d.types[e](a,b,c||{})};d.types={},d.type=null,d.addType=function(a,b){d.type||(d.type=a),d.types[a]=b,d[a]=function(b,c,e){return e=e||{},e.type=a,d(b,c,e)}},d.error=function(){return"amplify.store quota exceeded"};var e=/^__amplify__/;for(var f in{localStorage:1,sessionStorage:1})try{window[f].setItem("__amplify__","x"),window[f].removeItem("__amplify__"),
c(f,window[f])}catch(a){}if(!d.types.localStorage&&window.globalStorage)try{c("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===d.type&&(d.type="globalStorage")}catch(a){}!function(){if(!d.types.localStorage){var a=document.createElement("div"),c="amplify";a.style.display="none",document.getElementsByTagName("head")[0].appendChild(a);try{a.addBehavior("#default#userdata"),a.load(c)}catch(b){return void a.parentNode.removeChild(a)}d.addType("userData",function(e,f,g){
a.load(c);var h,i,j,k,l,m=f,n=(new Date).getTime();if(!e){for(m={},l=[],k=0;h=a.XMLDocument.documentElement.attributes[k++];)i=JSON.parse(h.value),i.expires&&i.expires<=n?l.push(h.name):m[h.name]=i.data;for(;e=l.pop();)a.removeAttribute(e);return a.save(c),m}if(e=e.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),e=e.replace(/^-/,"_-"),f===b){if(h=a.getAttribute(e),i=h?JSON.parse(h):{expires:-1},!(i.expires&&i.expires<=n))return i.data;
a.removeAttribute(e)}else null===f?a.removeAttribute(e):(j=a.getAttribute(e),i=JSON.stringify({data:f,expires:g.expires?n+g.expires:null}),a.setAttribute(e,i));try{a.save(c)}catch(b){null===j?a.removeAttribute(e):a.setAttribute(e,j),d.userData();try{a.setAttribute(e,i),a.save(c)}catch(b){throw null===j?a.removeAttribute(e):a.setAttribute(e,j),d.error()}}return m})}}(),function(){function a(a){return a===b?b:JSON.parse(JSON.stringify(a))}var c={},e={};d.addType("memory",function(d,f,g){return d?f===b?a(c[d]):(e[d]&&(clearTimeout(e[d]),
delete e[d]),null===f?(delete c[d],null):(c[d]=f,g.expires&&(e[d]=setTimeout(function(){delete c[d],delete e[d]},g.expires)),f)):a(c)})}()}(this.amplify=this.amplify||{});var Hogan={};!function(a){function b(a,b,c){var d;return b&&"object"==typeof b&&(void 0!==b[a]?d=b[a]:c&&b.get&&"function"==typeof b.get&&(d=b.get(a))),d}function c(a,b,c,d,e,f){function g(){}function h(){}g.prototype=a,h.prototype=a.subs;var i,j=new g;j.subs=new h,j.subsText={},j.buf="",d=d||{},j.stackSubs=d,j.subsText=f;for(i in b)d[i]||(d[i]=b[i]);
for(i in d)j.subs[i]=d[i];e=e||{},j.stackPartials=e;for(i in c)e[i]||(e[i]=c[i]);for(i in e)j.partials[i]=e[i];return j}function d(a){return String(null===a||void 0===a?"":a)}function e(a){return a=d(a),k.test(a)?a.replace(f,"&amp;").replace(g,"&lt;").replace(h,"&gt;").replace(i,"&#39;").replace(j,"&quot;"):a}a.Template=function(a,b,c,d){a=a||{},this.r=a.code||this.r,this.c=c,this.options=d||{},this.text=b||"",this.partials=a.partials||{},this.subs=a.subs||{},this.buf=""},a.Template.prototype={r:function(a,b,c){
return""},v:e,t:d,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},ep:function(a,b){var d=this.partials[a],e=b[d.name];if(d.instance&&d.base==e)return d.instance;if("string"==typeof e){if(!this.c)throw new Error("No compiler available.");e=this.c.compile(e,this.options)}if(!e)return null;if(this.partials[a].base=e,d.subs){b.stackText||(b.stackText={});for(key in d.subs)b.stackText[key]||(b.stackText[key]=void 0!==this.activeSub&&b.stackText[this.activeSub]?b.stackText[this.activeSub]:this.text);
e=c(e,d.subs,d.partials,this.stackSubs,this.stackPartials,b.stackText)}return this.partials[a].instance=e,e},rp:function(a,b,c,d){var e=this.ep(a,c);return e?e.ri(b,c,d):""},rs:function(a,b,c){var d=a[a.length-1];if(!l(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return l(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ms(a,b,c,d,e,f,g)),h=!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,c,d,e){
var f,g=a.split("."),h=this.f(g[0],c,d,e),i=this.options.modelGet,j=null;if("."===a&&l(c[c.length-2]))h=c[c.length-1];else for(var k=1;k<g.length;k++)f=b(g[k],h,i),void 0!==f?(j=h,h=f):h="";return e&&!h?!1:(e||"function"!=typeof h||(c.push(j),h=this.mv(h,c,d),c.pop()),h)},f:function(a,c,d,e){for(var f=!1,g=null,h=!1,i=this.options.modelGet,j=c.length-1;j>=0;j--)if(g=c[j],f=b(a,g,i),void 0!==f){h=!0;break}return h?(e||"function"!=typeof f||(f=this.mv(f,c,d)),f):e?!1:""},ls:function(a,b,c,e,f,g){var h=this.options.delimiters;
return this.options.delimiters=g,this.b(this.ct(d(a.call(b,f,c)),b,e)),this.options.delimiters=h,!1},ct:function(a,b,c){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(a,this.options).render(b,c)},b:function(a){this.buf+=a},fl:function(){var a=this.buf;return this.buf="",a},ms:function(a,b,c,d,e,f,g){var h,i=b[b.length-1],j=a.call(i);return"function"==typeof j?d?!0:(h=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,
this.ls(j,i,b,c,h.substring(e,f),g)):j},mv:function(a,b,c){var e=b[b.length-1],f=a.call(e);return"function"==typeof f?this.ct(d(f.call(e)),e,c):f},sub:function(a,b,c,d){var e=this.subs[a];e&&(this.activeSub=a,e(b,c,this,d),this.activeSub=!1)}};var f=/&/g,g=/</g,h=/>/g,i=/\'/g,j=/\"/g,k=/[&<>\"\']/,l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(a){var b=function(){return+new Date},c=!!a.XDomainRequest,d="withCredentials"in new XMLHttpRequest||c,e=!1,f=2e4,g={};
try{e=new Worker("js/hnapi-worker.js"),e.addEventListener("message",function(a){var b=a.data,c=b.url||"";if(g[c]){var d=g[c],e=d.error,f=d.success;delete g[c],b.error?e(b.error):f(b.response)}},!1)}catch(a){}var h=function(h,i,j){if(i||(i=function(){}),j||(j=function(){}),d)if(e)g[h]={success:i,error:j},e.postMessage({url:h,timeout:f});else{var k=g[h]||(c?new XDomainRequest:new XMLHttpRequest);k._timeout&&clearTimeout(k._timeout),k._timeout=setTimeout(function(){k.abort()},f),k.onload=function(){
clearTimeout(this._timeout),delete g[h];try{i(JSON.parse(this.responseText))}catch(a){j(a)}},k.onerror=k.onabort=k.ontimeout=function(a){clearTimeout(this._timeout),delete g[h],j(a)},(k.readyState<=1||c)&&(k.open("GET",h+"?"+b(),!0),k.send()),g[h]=k}else{var l=a.document,m=l.createElement("script"),n="callback"+b();a[n]=i,m.onerror=j,m.src=h+"?callback="+n,l.body.appendChild(m)}},i=["//node-hnapi-eu.herokuapp.com/","//node-hnapi.azurewebsites.net/","//node-hnapi-eus.azurewebsites.net/"],j=function(a){
for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}};j(i);var k=i.length,l=function(a,b,c,d){var e=k-1>a?function(){l(a+1,b,c,d)}:d;h(i[a]+b,c,e)},m=function(a,b,c){h(i[0]+a,b,function(){l(0,a,b,c)})},n={urls:i,news:function(a,b){m("news",a,b)},news2:function(a,b){m("news2",a,b)},item:function(a,b,c){m("item/"+a,b,c)},comments:function(a,b,c){m("comments/"+a,b,c)}};a.hnapi=n}(window),function(a,b){"function"==typeof define&&define.amd?define("tappable",[],function(){
return b(a,window.document),a.tappable}):b(a,window.document)}(this,function(a,b){var c=Math.abs,d=function(){},e={noScroll:!1,activeClass:"tappable-active",onTap:d,onStart:d,onMove:d,onMoveOut:d,onMoveIn:d,onEnd:d,onCancel:d,allowClick:!1,boundMargin:50,noScrollDelay:0,activeClassDelay:0,inactiveClassDelay:0},f="ontouchend"in document,g={start:f?"touchstart":"mousedown",move:f?"touchmove":"mousemove",end:f?"touchend":"mouseup"},h=function(a,c){var d=b.elementFromPoint(a,c);return 3==d.nodeType&&(d=d.parentNode),
d},i=function(a){var b=a.target;if(b)return 3==b.nodeType&&(b=b.parentNode),b;var c=a.targetTouches[0];return h(c.clientX,c.clientY)},j=function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},k=function(a,b){return b?a.classList?void a.classList.add(b):void(j(a.className).indexOf(b)>-1||(a.className=j(a.className+" "+b))):void 0},l=function(a,b){return b?a.classList?void a.classList.remove(b):void(a.className=a.className.replace(new RegExp("(^|\\s)"+b+"(?:\\s|$)"),"$1")):void 0},m=function(a,c){
var d=b.documentElement,e=d.matchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||d.oMatchesSelector||d.msMatchesSelector;return e.call(a,c)},n=function(a,b){var c=!1;do c=m(a,b);while(!c&&(a=a.parentNode)&&a.ownerDocument);return c?a:!1};a.tappable=function(a,d){"function"==typeof d&&(d={onTap:d});var f={};for(var j in e)f[j]=d[j]||e[j];var m,o,p,q,r,s,t,u,v=f.containerElement||b.body,w=!1,x=!1,y=f.activeClass,z=f.activeClassDelay,A=f.inactiveClassDelay,B=f.noScroll,C=f.noScrollDelay,D=f.boundMargin,E=function(b){
var c=n(i(b),a);if(c){if(z?(clearTimeout(s),s=setTimeout(function(){k(c,y)},z)):k(c,y),A&&c==o&&clearTimeout(t),p=b.clientX,q=b.clientY,!p||!q){var d=b.targetTouches[0];p=d.clientX,q=d.clientY}m=c,w=!1,x=!1,r=B?c.getBoundingClientRect():null,C&&(clearTimeout(u),B=!1,u=setTimeout(function(){B=!0},C)),f.onStart.call(v,b,c)}},F=function(a){if(m){B?a.preventDefault():clearTimeout(s);var b=a.target,d=a.clientX,e=a.clientY;if(!b||!d||!e){var g=a.changedTouches[0];d||(d=g.clientX),e||(e=g.clientY),b||(b=h(d,e));
}B?d>r.left-D&&d<r.right+D&&e>r.top-D&&e<r.bottom+D?(x=!1,k(m,y),f.onMoveIn.call(v,a,b)):(x=!0,l(m,y),f.onMoveOut.call(v,a,b)):!w&&c(e-q)>10&&(w=!0,l(m,y),f.onCancel.call(b,a)),f.onMove.call(v,a,b)}},G=function(a){if(m){if(clearTimeout(s),A){z&&!w&&k(m,y);var b=m;t=setTimeout(function(){l(b,y)},A)}else l(m,y);f.onEnd.call(v,a,m);var c=3==a.which||2==a.button;w||x||c||f.onTap.call(v,a,m),o=m,m=null,setTimeout(function(){p=q=null},400)}},H=function(a){m&&(l(m,y),m=p=q=null,f.onCancel.call(v,a))},I=function(b){
var d=n(b.target,a);d?b.preventDefault():p&&q&&c(b.clientX-p)<25&&c(b.clientY-q)<25&&(b.stopPropagation(),b.preventDefault())};return v.addEventListener(g.start,E,!1),v.addEventListener(g.move,F,!1),v.addEventListener(g.end,G,!1),v.addEventListener("touchcancel",H,!1),f.allowClick||v.addEventListener("click",I,!1),{el:v,destroy:function(){return v.removeEventListener(g.start,E,!1),v.removeEventListener(g.move,F,!1),v.removeEventListener(g.end,G,!1),v.removeEventListener("touchcancel",H,!1),f.allowClick||v.removeEventListener("click",I,!1),
this}}}}),function(a){if("performance"in a==!1&&(a.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in a.performance==!1){var b=a.performance.timing&&a.performance.timing.navigationStart?performance.timing.navigationStart:Date.now();a.performance.now=function(){return Date.now()-b}}}(this);var TWEEN=TWEEN||function(){var a=[];return{REVISION:"14",getAll:function(){return a},removeAll:function(){a=[]},add:function(b){a.push(b)},remove:function(b){var c=a.indexOf(b);-1!==c&&a.splice(c,1);
},update:function(b){if(0===a.length)return!1;var c=0;for(b=void 0!==b?b:window.performance.now();c<a.length;)a[c].update(b)?c++:a.splice(c,1);return!0}}}();TWEEN.Tween=function(a){var b=a,c={},d={},e={},f=1e3,g=0,h=!1,i=!1,j=!1,k=0,l=null,m=TWEEN.Easing.Linear.None,n=TWEEN.Interpolation.Linear,o=[],p=null,q=!1,r=null,s=null,t=null;for(var u in a)c[u]=parseFloat(a[u],10);this.to=function(a,b){return void 0!==b&&(f=b),d=a,this},this.start=function(a){TWEEN.add(this),i=!0,q=!1,l=void 0!==a?a:window.performance.now(),
l+=k;for(var f in d){if(d[f]instanceof Array){if(0===d[f].length)continue;d[f]=[b[f]].concat(d[f])}c[f]=b[f],c[f]instanceof Array==!1&&(c[f]*=1),e[f]=c[f]||0}return this},this.stop=function(){return i?(TWEEN.remove(this),i=!1,null!==t&&t.call(b),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var a=0,b=o.length;b>a;a++)o[a].stop()},this.delay=function(a){return k=a,this},this.repeat=function(a){return g=a,this},this.yoyo=function(a){return h=a,this},this.easing=function(a){
return m=a,this},this.interpolation=function(a){return n=a,this},this.chain=function(){return o=arguments,this},this.onStart=function(a){return p=a,this},this.onUpdate=function(a){return r=a,this},this.onComplete=function(a){return s=a,this},this.onStop=function(a){return t=a,this},this.update=function(a){var i;if(l>a)return!0;q===!1&&(null!==p&&p.call(b),q=!0);var t=(a-l)/f;t=t>1?1:t;var u=m(t);for(i in d){var v=c[i]||0,w=d[i];w instanceof Array?b[i]=n(w,u):("string"==typeof w&&(w=v+parseFloat(w,10)),
"number"==typeof w&&(b[i]=v+(w-v)*u))}if(null!==r&&r.call(b,u),1==t){if(g>0){isFinite(g)&&g--;for(i in e){if("string"==typeof d[i]&&(e[i]=e[i]+parseFloat(d[i],10)),h){var x=e[i];e[i]=d[i],d[i]=x}c[i]=e[i]}return h&&(j=!j),l=a+k,!0}null!==s&&s.call(b);for(var y=0,z=o.length;z>y;y++)o[y].start(a);return!1}return!0}},TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{
In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2);
},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,
b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)))},Out:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/d)+1)},InOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),(a*=2)<1?-.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d):c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)*.5+1)}},Back:{In:function(a){
var b=1.70158;return a*a*((b+1)*a-b)},Out:function(a){var b=1.70158;return--a*a*((b+1)*a+b)+1},InOut:function(a){var b=2.5949095;return(a*=2)<1?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*TWEEN.Easing.Bounce.In(2*a):.5*TWEEN.Easing.Bounce.Out(2*a-1)+.5;
}}},TWEEN.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),f=TWEEN.Interpolation.Utils.Linear;return 0>b?f(a[0],a[1],d):b>1?f(a[c],a[c-1],c-d):f(a[e],a[e+1>c?c:e+1],d-e)},Bezier:function(a,b){var c,d=0,e=a.length-1,f=Math.pow,g=TWEEN.Interpolation.Utils.Bernstein;for(c=0;e>=c;c++)d+=f(1-b,e-c)*f(b,c)*a[c]*g(e,c);return d},CatmullRom:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),f=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),
f(a[(e-1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(f(a[0],a[0],a[1],a[1],-d)-a[0]):b>1?a[c]-(f(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):f(a[e?e-1:0],a[e],a[e+1>c?c:e+1],a[e+2>c?c:e+2],d-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c,d=1;if(a[b])return a[b];for(c=b;c>1;c--)d*=c;return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;
return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b}}},function(a){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"object"==typeof exports?module.exports=TWEEN:a.TWEEN=TWEEN}(this),function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){
var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){TEMPLATES={"comments-toggle":new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<button class="comments-toggle">'),d.b(d.v(d.f("comments_count",a,b,0))),d.b(" "),d.b(d.v(d.f("i_reply",a,b,0))),d.b("</button>"),d.fl()},partials:{},subs:{}}),comments:new a({code:function(a,b,c){
var d=this;return d.b(c=c||""),d.s(d.f("comments",a,b,1),a,b,0,13,327,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<li><p class="metadata '),c.s(c.f("deleted",a,b,1),a,b,0,48,55,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b("deleted")}),a.pop()),c.b('">'),c.s(c.f("deleted",a,b,1),a,b,0,81,103,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b("<span>[deleted]</span>")}),a.pop()),c.s(c.f("deleted",a,b,1),a,b,1,0,0,"")||(c.b('<b class="user">'),c.b(c.v(c.f("user",a,b,0))),c.b("</b>")),c.b('<time><a href="#" data-id="'),
c.b(c.v(c.f("id",a,b,0))),c.b('" class="comment-permalink">'),c.b(c.v(c.f("time_ago",a,b,0))),c.b("</a></time></p>"),c.s(c.f("deleted",a,b,1),a,b,1,0,0,"")||(c.b("<p>"),c.b(c.t(c.f("content",a,b,0)))),c.b("<ul>"),c.b(c.rp("<comments_list0",a,b,"")),c.b("</ul></li>")}),a.pop()),d.fl()},partials:{"<comments_list0":{name:"comments_list",partials:{},subs:{}}},subs:{}}),"post-comments":new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="post-content">'),d.s(d.f("has_post",a,b,1),a,b,0,39,577,"{{ }}")&&(d.rs(a,b,function(a,b,c){
c.b('<header><h1><a href="'),c.b(c.v(c.f("url",a,b,0))),c.b('" target="_blank">'),c.b(c.v(c.f("title",a,b,0))),c.b("<br>"),c.s(c.f("user",a,b,1),a,b,0,107,170,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.s(c.f("domain",a,b,1),a,b,0,118,159,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<span class="link-text">'),c.b(c.v(c.f("domain",a,b,0))),c.b("</span>")}),a.pop())}),a.pop()),c.b('</a></h1><p class="metadata">'),c.s(c.f("user",a,b,1),a,b,0,217,412,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<span class="inline-block">'),
c.b(c.v(c.f("points",a,b,0))),c.b(" "),c.b(c.v(c.f("i_point",a,b,0))),c.b(" by "),c.b(c.v(c.f("user",a,b,0))),c.b('</span> <span class="inline-block">'),c.b(c.v(c.f("time_ago",a,b,0))),c.s(c.f("comments_count",a,b,1),a,b,0,344,386,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b(" &middot; "),c.b(c.v(c.f("comments_count",a,b,0))),c.b(" "),c.b(c.v(c.f("i_comment",a,b,0)))}),a.pop()),c.b("</span>")}),a.pop()),c.s(c.f("user",a,b,1),a,b,1,0,0,"")||(c.b('<span class="inline-block">'),c.b(c.v(c.f("time_ago",a,b,0))),
c.b("</span>")),c.b('<a href="'),c.b(c.v(c.f("hn_url",a,b,0))),c.b('" target="_blank" class="external-link">'),c.b(c.v(c.f("short_hn_url",a,b,0))),c.b("</a></p></header>")}),a.pop()),d.s(d.f("has_content",a,b,1),a,b,0,606,929,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<section class="grouped-tableview">'),c.b(c.t(c.f("content",a,b,0))),c.s(c.f("has_poll",a,b,1),a,b,0,667,906,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<ul class="poll">'),c.s(c.f("poll",a,b,1),a,b,0,693,892,"{{ }}")&&(c.rs(a,b,function(a,b,c){
c.b('<li title="'),c.b(c.v(c.f("percentage",a,b,0))),c.b('%"><span class="poll-details"><b>'),c.b(c.v(c.f("item",a,b,0))),c.b('</b> <span class="points">'),c.b(c.v(c.f("points",a,b,0))),c.b(" "),c.b(c.v(c.f("i_point",a,b,0))),c.b('</span></span><div class="poll-bar"><span style="width: '),c.b(c.v(c.f("width",a,b,0))),c.b('"></span></div></li>')}),a.pop()),c.b("</ul>")}),a.pop()),c.b("</section>")}),a.pop()),d.b('</div><section class="comments">'),d.s(d.f("loading",a,b,1),a,b,0,989,1059,"{{ }}")&&(d.rs(a,b,function(a,b,c){
c.b('<div class="loader"><i class="icon-loading"></i> Loading&hellip;</div>')}),a.pop()),d.s(d.f("load_error",a,b,1),a,b,0,1086,1169,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="load-error">Couldn\'t load comments.<br><button>Try again</button></div>')}),a.pop()),d.s(d.f("loading",a,b,1),a,b,1,0,0,"")||d.s(d.f("load_error",a,b,1),a,b,1,0,0,"")||(d.s(d.f("has_comments",a,b,1),a,b,0,1228,1255,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("<ul>"),c.b(c.rp("<comments_list0",a,b,"")),c.b("</ul>")}),
a.pop()),d.s(d.f("has_comments",a,b,1),a,b,1,0,0,"")||d.b('<p class="no-comments">No comments.</p>')),d.b("</section>"),d.fl()},partials:{"<comments_list0":{name:"comments_list",partials:{},subs:{}}},subs:{}}),post:new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li id="story-'),d.b(d.v(d.f("id",a,b,0))),d.b('" data-index="'),d.b(d.v(d.f("i",a,b,0))),d.b('" class="post-'),d.b(d.v(d.f("type",a,b,0))),d.b('"><a href="'),d.b(d.v(d.f("url",a,b,0))),d.b('" class="'),d.s(d.f("detail_disclosure",a,b,1),a,b,0,110,127,"{{ }}")&&(d.rs(a,b,function(a,b,c){
c.b("detail-disclosure")}),a.pop()),d.s(d.f("disclosure",a,b,1),a,b,0,164,174,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("disclosure")}),a.pop()),d.b(" "),d.s(d.f("selected",a,b,1),a,b,0,203,211,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("selected")}),a.pop()),d.b('"><div class="number">'),d.b(d.v(d.f("i",a,b,0))),d.b('</div><div class="story"><b>'),d.b(d.v(d.f("title",a,b,0))),d.b("</b>"),d.s(d.f("user",a,b,1),a,b,0,301,589,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<span class="metadata">'),c.s(c.f("domain",a,b,1),a,b,0,335,376,"{{ }}")&&(c.rs(a,b,function(a,b,c){
c.b('<span class="link-text">'),c.b(c.v(c.f("domain",a,b,0))),c.b("</span>")}),a.pop()),c.b('<span class="inline-block">'),c.b(c.v(c.f("points",a,b,0))),c.b(" "),c.b(c.v(c.f("i_point",a,b,0))),c.b(" by "),c.b(c.v(c.f("user",a,b,0))),c.b('</span> <span class="inline-block">'),c.b(c.v(c.f("time_ago",a,b,0))),c.s(c.f("comments_count",a,b,1),a,b,0,514,556,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b(" &middot; "),c.b(c.v(c.f("comments_count",a,b,0))),c.b(" "),c.b(c.v(c.f("i_comment",a,b,0)))}),a.pop()),c.b("</span></span>");
}),a.pop()),d.s(d.f("user",a,b,1),a,b,1,0,0,"")||(d.b('<span class="metadata">'),d.s(d.f("domain",a,b,1),a,b,0,641,686,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<span class="link-text">'),c.b(c.v(c.f("domain",a,b,0))),c.b("</span><br>")}),a.pop()),d.b('<span class="inline-block">'),d.b(d.v(d.f("time_ago",a,b,0))),d.b("</span></span>")),d.b("</div></a>"),d.s(d.f("detail_disclosure",a,b,1),a,b,0,791,865,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<a href="#/item/'),c.b(c.v(c.f("id",a,b,0))),c.b('" class="detail-disclosure-button"><span></span></a>');
}),a.pop()),d.b("</li>"),d.fl()},partials:{},subs:{}}),"stories-load":new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("loading",a,b,1),a,b,0,12,82,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="loader"><i class="icon-loading"></i> Loading&hellip;</div>')}),a.pop()),d.s(d.f("load_error",a,b,1),a,b,0,109,161,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="load-error">Couldn\'t load stories.</div>')}),a.pop()),d.fl()},partials:{},subs:{}})}}(Hogan.Template),function(a){
var b=a.document,c=a.$=function(a){return b.getElementById(a)},d={},e=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},f={pub:function(a,b){var c=d[a];if(c)for(var e=0,f=c.length;f>e;e++)c[e].call(this,b)},sub:function(a,b){d[a]||(d[a]=[]),d[a].push(b)},currentView:null,hideAllViews:function(){for(var a=b.querySelectorAll(".view"),c=0,d=a.length;d>c;c++)a[c].classList.add("hidden")},tmpl:function(a,b){var c=TEMPLATES[a];if(c)return b?c.render(b):c},setTitle:function(a){
var b="HackerWeb";a&&(a=a.replace(/^\s+|\s+$/g,""),a.toLowerCase()!=b.toLowerCase()&&(b=a+" – "+b)),document.title=b}};"undefined"!=typeof ga&&f.sub("logAPIError",function(a){ga("send","event","Errors","API",a)});var g=f.tmpl;amplify.store.sessionStorage&&"function"==typeof amplify.store.sessionStorage||(amplify.store.sessionStorage=amplify.store.memory);var h=b.createElement("a"),i={},j=function(a){var b=i[a];if(b)return b;h.href=a;var c=h.hostname.replace(/^www\./,""),d=h.pathname.replace(/^\//,"").split("/")[0],e=d.length,f=c.length<=25&&e>3&&15>=e&&/^[^0-9][^.]+$/.test(d)?"/"+d:"";
return b=c+f},k=b.querySelector("#view-home .scroll"),l=k.querySelector("section"),m=!1;f.news={options:{disclosure:!0},markupStory:function(a){return/^item/i.test(a.url)?a.url="#/item/"+a.id:(a.external=!0,a.domain=j(a.url)),f.news.options.disclosure?("link"==a.type&&(a.detail_disclosure=!0),/^#\//.test(a.url)&&(a.detail_disclosure=!1,a.disclosure=!0,a.domain=null)):a.id&&(a.url="#/item/"+a.id),a.i_point=1==a.points?"point":"points",a.i_comment=1==a.comments_count?"comment":"comments",g("post",a);
},markupStories:function(a,b){var c="";b||(b=1);var d=f.news.markupStory;return a.forEach(function(a){a.i=b++,c+=d(a)}),c},updateStory:function(a){if(a&&a.id){var b,d=a.id,e=a.data,g="hacker-news",h=amplify.store(g);if(h)for(var i=0,j=h.length;j>i;i++){var k=h[i];if(d==k.id){b=k;break}}if(!b&&(g="hacker-news2",h=amplify.store(g)))for(var i=0,j=h.length;j>i;i++){var k=h[i];if(d==k.id){b=k;break}}if(b){var l=!1;if(["title","url","time_ago","comments_count","points"].forEach(function(a){var c=e[a];b[a]!=c&&(b[a]=c,
l=!0)}),l){amplify.store(g,h);var m=c("story-"+d);m&&(b.selected=!!m.querySelector("a[href].selected"),b.i=m.dataset?m.dataset.index:m.getAttribute("data-index"),m.insertAdjacentHTML("afterend",f.news.markupStory(b)),m.parentNode.removeChild(m))}}}},render:function(a){if(!m){a||(a={});var b=amplify.store("hacker-news-cached"),d=g("stories-load"),e=function(a){var b=a.slice(),c='<ul class="tableview tableview-links" id="hwlist">'+f.news.markupStories(b)+(amplify.store("hacker-news2")?'<li><a class="more-link">More&hellip;<span class="loader"><i class="icon-loading"></i></span></a></li>':"")+"</ul>";
l.innerHTML=c,f.pub("onRenderNews")};if(b){var h=amplify.store("hacker-news"),i=a.delay;i?(m=!0,l.innerHTML=d.render({loading:!0}),setTimeout(function(){m=!1,e(h)},i)):e(h)}else{m=!0,l.innerHTML=d.render({loading:!0});var j=function(){l.innerHTML=d.render({load_error:!0}),f.pub("logAPIError","news")};hnapi.news(function(a){return m=!1,!a||a.error?void j():(amplify.store("hacker-news",a),amplify.store("hacker-news-cached",!0,{expires:6e5}),amplify.store("hacker-news2",null),e(a),void hnapi.news2(function(a){
a&&!a.error&&(amplify.store("hacker-news2",a),c("hwlist").insertAdjacentHTML("beforeend",'<li><a class="more-link">More&hellip;<span class="loader"></span></a></li>'))}))},function(a){m=!1,j()})}}},reload:function(){f.news.render({delay:300})},more:function(a){a.classList.add("loading");var b=amplify.store("hacker-news2");setTimeout(function(){a.classList.remove("loading");var d=a.parentNode;if(d&&(d.parentNode&&d.parentNode.removeChild(d),b)){var e=b.slice(),g=f.news.markupStories(e,31);c("hwlist").insertAdjacentHTML("beforeend",g);
}},400)}};var n=c("view-comments"),o=n.querySelector("header h1"),p=n.querySelector("section");f.comments={currentID:null,render:function(a){if(a){var c=amplify.store.sessionStorage("hacker-item-"+a);if(f.comments.currentID!=a||!c){f.comments.currentID=a;var d=function(a,c){var d=e(a),h=g("post-comments");if(d.has_post=!!d.title,!d.has_post)return f.setTitle(),o.innerHTML="",p.innerHTML=h.render(d),f.pub("adjustCommentsSection"),void f.pub("onRenderComments");var i=g("comments");if(/^item/i.test(d.url)?d.url="//news.ycombinator.com/"+d.url:d.domain=j(d.url),
d.has_comments=d.comments&&!!d.comments.length,d.i_point=1==d.points?"point":"points",d.i_comment=1==d.comments_count?"comment":"comments",d.has_content=!!d.content,d.poll){var k=0,l=0;d.poll.forEach(function(a){var b=a.points;b>l&&(l=b),k+=b,a.i_point=1==b?"point":"points"}),d.poll.forEach(function(a){var b=a.points;a.percentage=(b/k*100).toFixed(1),a.width=(b/l*100).toFixed(1)+"%"}),d.has_poll=d.has_content=!0}d.short_hn_url="news.ycombinator.com/item?id="+c,d.hn_url="//"+d.short_hn_url,f.setTitle(d.title),
o.innerHTML=d.title;var m=h.render(d,{comments_list:i}),n=b.createElement("div");n.innerHTML=m;for(var q=n.querySelectorAll("a"),r=0,s=q.length;s>r;r++){var t=q[r];if(t.classList.contains("comment-permalink")){var c=t.dataset?t.dataset.id:t.getAttribute("data-id");t.href="//news.ycombinator.com/item?id="+c}t.target="_blank"}var u=d.user;if(u)for(var v=n.querySelectorAll(".user"),r=0,s=v.length;s>r;r++){var w=v[r];w.textContent.trim()==u&&(w.classList.add("op"),w.title="Original Poster")}if(m.length>2e4)for(var x=n.querySelectorAll(".comments>ul>li>ul"),y=g("comments-toggle"),z=0,s=x.length;s>z;z++){
var A=x[z],B=A.querySelectorAll(".metadata").length;A.style.display="none",B&&A.insertAdjacentHTML("beforebegin",y.render({comments_count:B,i_reply:1==B?"reply":"replies"}))}for(;p.hasChildNodes();)p.removeChild(p.childNodes[0]);for(;n.hasChildNodes();)p.appendChild(n.childNodes[0]);delete n,f.pub("onRenderComments")};if(c)p.scrollTop=0,d(c,a);else{var h=amplify.store("hacker-news");if(h)for(var i=0,k=h.length;k>i;i++){var l=h[i];if(a==l.id){c=l;break}}if(!c){var h=amplify.store("hacker-news2");if(h)for(var i=0,k=h.length;k>i;i++){
var l=h[i];if(a==l.id){c=l;break}}}c?(c.loading=!0,d(c,a)):d({loading:!0},a);var m=function(){c?(delete c.loading,c.load_error=!0,d(c,a)):d({load_error:!0},a),f.pub("logAPIError","comments")};hnapi.item(a,function(b){if(f.comments.currentID==a){if(!b||b.error&&"comments"==f.currentView)return void m();amplify.store.sessionStorage("hacker-item-"+a,b,{expires:3e5}),f.news.updateStory({id:a,data:b}),d(b,a)}},function(b){f.comments.currentID==a&&m()})}}}},toggle:function(a){var b=a.nextElementSibling;
if(b){var c=b.style,d=p.scrollTop;c.display="none"==c.display?"":"none",p.scrollTop=d}},reload:function(){f.comments.currentID=null,ruto.reload()}},f.init=function(){f.news.render(),ruto.init()},a.hw=f,ruto.config({before:function(a,b){f.hideAllViews();var d=c("view-"+b);d.classList.remove("hidden"),f.currentView=b,f.setTitle(d.querySelector("header h1").textContent)},notfound:function(){ruto.go("/")}}).add("/","home").add("/about","about").add(/^\/item\/(\d+)$/i,"comments",function(a,b){f.comments.render(b);
})}(window),function(a){var b=a.document,c=b.body,d={clockwise:["flip-out-to-left","flip-in-from-left"],anticlockwise:["flip-out-to-right","flip-in-from-right"]},e=function(a){var b=a.in,e=a.out,f=b.classList,g=e.classList,h=a.direction,i=a.fn,j=d[h],k=function(){b.removeEventListener("webkitAnimationEnd",k,!1),c.classList.remove("viewport-flip"),g.add("hidden"),f.remove("flip"),g.remove("flip"),g.remove(j[0]),f.remove(j[1]),i&&i.apply()};c.classList.add("viewport-flip"),f.remove("hidden"),g.add("flip"),
f.add("flip"),b.addEventListener("webkitAnimationEnd",k,!1),g.add(j[0]),f.add(j[1])},f={rtl:["slide-out-to-left","slide-in-from-right"],ltr:["slide-out-to-right","slide-in-from-left"]},g=function(a){var b=a.in,c=a.out,d=b.classList,e=c.classList,g=b.getElementsByTagName("header")[0],h=c.getElementsByTagName("header")[0],i=g.classList,j=h.classList,k=a.direction,l=a.fn,m=f[k],n=function(){e.add("hidden"),b.removeEventListener("webkitAnimationEnd",n,!1),e.remove("sliding"),d.remove("sliding"),e.remove(m[0]),
d.remove(m[1]),i.remove("transparent"),j.remove("transparent"),l&&l.apply()};d.remove("hidden"),e.add("sliding"),d.add("sliding"),b.addEventListener("webkitAnimationEnd",n,!1),i.add("transparent"),j.add("transparent"),e.add(m[0]),d.add(m[1])},h=function(){return a.innerWidth>=640?"wide":"narrow"},i=b.querySelector("meta[name=viewport]");i||(i=b.createElement("meta"),i.name="viewport",b.head.appendChild(i)),i.content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0";
var j=navigator.userAgent,k=j&&/iPhone|iPod/.test(j),l=parseInt((j.match(/ OS (\d+)_/i)||[,0])[1],10)<6;k&&l&&c.classList.add("ios5");var m="wide"==h();a.addEventListener("resize",function(){var a="wide"==h();a!=m&&(m=a,location.reload())}),c.insertAdjacentHTML("beforeend",m?'<div id="overlay" class="hide"></div>':'<header class="fake"></header>'),ruto.config({before:function(a,b,c){var d=hw.currentView,f=hw.hideAllViews,h=$("view-"+b);switch(hw.setTitle(h.querySelector("header h1").textContent),
b){case"home":if(m){f(),$("overlay").classList.add("hide"),h.classList.remove("hidden");var i=$("view-comments");i.classList.remove("hidden"),i.querySelector("section").innerHTML='<div class="view-blank-state"><div class="view-blank-state-text">No Story Selected.</div></div>',i.querySelector("header h1").innerHTML="",i.querySelector("header a.header-back-button").style.display="none",hw.comments.currentID=null,hw.pub("selectCurrentStory")}else d?"about"==d?e({in:h,out:$("view-"+d),direction:"anticlockwise"
}):"home"!=d&&g({in:h,out:$("view-"+d),direction:"ltr"}):(f(),h.classList.remove("hidden"));hw.currentView="home";break;case"about":m?(h.classList.remove("hidden"),$("view-home").classList.remove("hidden"),$("view-comments").classList.remove("hidden"),setTimeout(function(){$("overlay").classList.remove("hide")},1)):d?"about"!=d&&e({in:h,out:$("view-home"),direction:"clockwise"}):(f(),h.classList.remove("hidden")),hw.currentView="about";break;case"comments":if(m)f(),$("overlay").classList.add("hide"),
h.classList.remove("hidden"),$("view-home").classList.remove("hidden"),hw.pub("selectCurrentStory",c[1]),h.querySelector("header a.header-back-button").style.display="";else if(d){if("comments"!=d){var j=c[1];j&&hw.comments.currentID!=j&&(h.querySelector("section").scrollTop=0),g({in:h,out:$("view-"+d),direction:"rtl"})}}else f(),h.classList.remove("hidden");hw.currentView="comments"}}}),a.addEventListener("pagehide",function(){for(var a=b.querySelectorAll(".view"),c={},d=0,e=a.length;e>d;d++){var f=a[d];
c[f.id]=f.querySelector(".scroll section").scrollTop||0}amplify.store("hacker-scrolltops",c)},!1);var n=function(){var a=amplify.store("hacker-scrolltops");setTimeout(function(){for(var b in a)$(b).querySelector(".scroll section").scrollTop=a[b]},1)};if(a.addEventListener("pageshow",n,!1),n(),k){var o=b.querySelectorAll(".view>.scroll"),p=null;Array.prototype.forEach.call(o,function(d){d.addEventListener("touchstart",function(){if(a.innerHeight!=p){if(a.scrollTo(0,0),l){var d=b.createElement("div");
d.style.height="600px",c.appendChild(d),setTimeout(function(){c.removeChild(d)},100)}p=a.innerHeight}},!1)})}tappable(".view>header a.header-button[href]",{noScroll:!0,onTap:function(a,b){var c=b.hash;m&&/about/i.test(ruto.current)&&"#/"==c?ruto.back("/"):location.hash=c}}),tappable("#view-home-refresh",{noScroll:!0,onTap:hw.news.reload});var q=!1;tappable(".view>header h1",{onTap:function(a,b){var d=b.parentNode.nextElementSibling.firstElementChild;if(0==d.scrollTop||q){if(k){var e=c.style.height;
c.style.height="100%",setTimeout(function(){c.style.height=e},100)}}else{if(q)return;q=!0;var f=d.style.overflow;d.style.overflow="hidden",setTimeout(function(){d.style.overflow=f;var a,b=new TWEEN.Tween({scrollTop:d.scrollTop}).to({scrollTop:0},300).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function(){d.scrollTop=this.scrollTop}).onComplete(function(){cancelAnimationFrame(a),b.stop(),q=!1,delete b}).start(),c=function(){TWEEN.update(),requestAnimationFrame(c)};a=requestAnimationFrame(c)},200)}}});
var r;tappable("#view-home .tableview-links li>a:first-child",{allowClick:!m,activeClassDelay:100,inactiveClassDelay:m?100:1e3,onStart:function(a,b){if(m){var c=b.parentNode;c&&(c=c.parentNode,r=setTimeout(function(){c&&c.classList.add("list-tapped")},100))}},onMove:function(){m&&clearTimeout(r)},onEnd:function(a,b){if(m){clearTimeout(r);var c=b.parentNode.parentNode;setTimeout(function(){c&&c.classList.remove("list-tapped")},100)}},onTap:function(b,c){c.classList.contains("more-link")?hw.news.more(c):/^#\//.test(c.getAttribute("href"))?location.hash=c.hash:c.href&&m&&a.open(c.href);
}}),tappable("#view-about .grouped-tableview-links li>a:first-child",{allowClick:!0,activeClassDelay:100,inactiveClassDelay:1e3}),tappable("#view-home .tableview-links li>a.detail-disclosure-button",{noScroll:!0,noScrollDelay:100,onTap:function(a,b){location.hash=b.hash}}),tappable("button.comments-toggle",function(a,b){hw.comments.toggle(b)}),tappable("#view-comments .load-error button",hw.comments.reload),hw.sub("selectCurrentStory",function(a){if(m){a||(a=(location.hash.match(/item\/(\d+)/)||[,""])[1]);
for(var b=$("view-home"),c=b.querySelectorAll("a[href].selected"),d=0,e=c.length;e>d;d++)c[d].classList.remove("selected");if(a){var f=b.querySelector('a[href*="item/'+a+'"]');f&&(f.classList.add("selected"),setTimeout(function(){f.scrollIntoViewIfNeeded?f.scrollIntoViewIfNeeded():f.scrollIntoView()},1))}}}),hw.sub("onRenderNews",function(){hw.pub("selectCurrentStory")}),a.addEventListener("pageshow",function(){setTimeout(function(){"home"==hw.currentView&&$("hwlist")&&!amplify.store("hacker-news-cached")&&hw.news.reload();
},1)},!1);var s=function(){var a=b.querySelector("#view-comments section");if(a){var c=a.querySelector(".post-content"),d=a.querySelector(".comments");if(d){var e=a.offsetHeight-c.offsetHeight+1,f=$("comment-section-style");f||(f=b.createElement("style"),f.id="comment-section-style",b.head.appendChild(f)),f.textContent=".view section.comments{min-height: "+e+"px;}"}}};hw.sub("onRenderComments",function(){setTimeout(s,m?1:360)}),a.addEventListener("resize",s,!1),a.addEventListener("orientationchange",s,!1);
var t="undefined"!=typeof a.orientation,u=function(){t&&(c.style.height=screen.height+"px",setTimeout(function(){a.scrollTo(0,0),c.style.height=a.innerHeight+"px"},1))};if(m){var v=$("apploader");v.parentNode.removeChild(v)}else"complete"==b.readyState?u():a.addEventListener("load",u,!1),t&&(a.onorientationchange=u),setTimeout(function(){var a=$("apploader");a&&(a.classList.add("hide"),a.addEventListener("webkitTransitionEnd",function(){a.parentNode.removeChild(a)},!1))},200);hw.news.options.disclosure=!m,
hw.init()}(window),WebFontConfig={google:{families:["Inconsolata"]}},function(){var a=document.createElement("script");a.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",a.type="text/javascript",a.async="true";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}();
//# sourceMappingURL=hw-ios.min.js.map